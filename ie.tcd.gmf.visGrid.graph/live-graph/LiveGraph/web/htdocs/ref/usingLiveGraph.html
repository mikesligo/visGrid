<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/Template.dwt" codeOutsideHTMLIsLocked="false" -->

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="title" content="Live Graph: real-time graph plot and data logging &quot; visualisation API" />
	<meta name="description" content="Plot graphs in real-time while the CSV data is still being generated by your application. Very easy GUI to manage 1000s of data series efficiently. Includes data logging API. Java, open-source, free. Well documented." />
	<meta name="keywords" content="live graph, real-time plot, plot, graph plot, graph plotter, graph plotting, data plotter, data graph, datagraph, live plotter, graph chart, graph charts, real time graph, real time plotter, real time chart, instant graph, instant plotter, instant chart, online graph, online plotter, online chart, graph plotting software, plot data, plot graph, java, CSV file, CSV data, creating csv files, csv file java, data logging API" />
	<meta name="language" content="English" />
	<meta name="author" content="Greg Paperin" />
	<meta name="copyright" content="Gregory Paperin 2007-2008" />
	<meta name="robots" content="All, index, follow" />
	<meta name="revisit-after" content="7 days" />
	<meta name="document-class" content="Completed" />
	<meta name="document-classification" content="Public" />
	<meta name="document-rights" content="Copywritten Work" />
	<meta name="document-type" content="Web Page" />
	<meta name="document-rating" content="General" />
	<meta name="document-distribution" content="Global" />
	<meta name="document-state" content="Static" />
	<meta name="cache-control" content="Public" />
	<link href="../html_inc/LiveGraph.css" rel="stylesheet" type="text/css" />
<!-- InstanceBeginEditable name="doctitle" -->
	<title>LiveGraph developer manual: System overview</title>
	<style type="text/css">
		td.java, td.java-ln {vertical-align:top;}
		tt.java, tt.java-ln, pre.java, pre.java-ln {line-height:1em; margin-bottom:0em;}
		td.java-ln { text-align:right; }
		tt.java-ln, pre.java-ln { color:#888888 }
		/* Background       */ span.java0  { font-size: 10pt; color:#ffffff; }
		/* Line numbers       */ span.java1  { font-size: 10pt; color:#808080; }
		/* Multi-line comments       */ span.java2  { font-size: 10pt; color:#3f7f5f; }
		/* Single-line comments       */ span.java3  { font-size: 10pt; color:#3f7f5f; }
		/* Keywords       */ span.java4  { font-size: 10pt; color:#7f0055; font-weight:bold; }
		/* Strings       */ span.java5  { font-size: 10pt; color:#2a00ff; }
		/* Character constants       */ span.java6  { font-size: 10pt; color:#990000; }
		/* Numeric constants       */ span.java7  { font-size: 10pt; color:#990000; }
		/* Parenthesis       */ span.java8  { font-size: 10pt; color:#FF42FF; }
		/* Primitive Types       */ span.java9  { font-size: 10pt; color:#7f2233; font-weight:bold; }
		/* Others       */ span.java10  { font-size: 10pt; color:#000000; }
		/* Javadoc keywords       */ span.java11  { font-size: 10pt; color:#7f9fbf; }
		/* Javadoc HTML tags       */ span.java12  { font-size: 10pt; color:#7f7f9f; }
		/* Javadoc links       */ span.java13  { font-size: 10pt; color:#3f3fbf; }
		/* Javadoc others       */ span.java14  { font-size: 10pt; color:#3f5fbf; }
		/* Undefined       */ span.java15  { font-size: 10pt; color:#ff6100; }
		/* Annotation       */ span.java16  { font-size: 10pt; color:#646464; }
	</style>
<!-- InstanceEndEditable -->
    <!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>

<body>

<!-- InstanceBeginEditable name="BodyTag" --><div id="pageDevMan_UsingLiveGraph"><!-- InstanceEndEditable -->


	<div id="centre">

		<div id="top"></div> <!-- id="top" -->

		<div id="main_page">

			<div id="header"></div> <!-- id="header" -->

			<div id="main_menu">
				<ul>
					<li id="locHome"><a href="../index.html">Home</a></li>
					<li id="locWhyLiveGraph"><a href="../whyLiveGraph.html">Why LiveGraph?</a></li>
					<li id="locReferences"><a href="../references.html">References</a></li>
					<li id="locUserMan"><a href="../userManual.html">User manual</a>
						<ul>
							<li id="locUserMan_WainWin"><a href="../help/mainWindow.html">Main window</a></li>
							<li id="locUserMan_DataFileSetts"><a href="../help/dataFileSettings.html">Data file settings</a></li>
							<li id="locUserMan_GraphSetts"><a href="../help/graphSettings.html">Graph settings</a></li>
							<li id="locUserMan_SeriesSetts"><a href="../help/dataSeriesSettings.html">Data series settings</a></li>
							<li id="locUserMan_DataPlot"><a href="../help/dataPlot.html">Data plot</a></li>
						</ul>
					</li>
					<li id="locDevMan"><a href="../developerManual.html">Developer manual</a>
						<ul>
							<li id="locDevMan_UsingLiveGraph"><a href="usingLiveGraph.html">Using LiveGraph in your application</a></li>
							<li id="locDevMan_DataFile"><a href="dataFile.html">Data file format specification</a></li>
							<li id="locDevMan_JavaDoc"><a href="javaDoc.html">Javadoc reference</a></li>
						</ul>
					</li>
					<li id="locForum"><a href="../contact.html">Forum &amp; Contact</a>
						<ul>
							<li id="locForum_RequestsAndReports"><a href="../forum/requestsAndReports.html">Requests and Reports</a></li>
							<li id="locForum_UserDiscussion"><a href="../forum/userDiscussion.html">User Discussion</a></li>
						</ul>
					</li>
					<li id="locDownload"><a href="../download.html">Download</a></li>
					<li id="locSourceforge"><a href="http://sourceforge.net/projects/live-graph/" target="_blank">LiveGraph on SourceForge</a></li>
				</ul>
			</div> <!-- id="main_menu" -->

			<div id="content"><!-- InstanceBeginEditable name="content" -->
			  <h1>Using LiveGraph in your own applications</h1>
			  <p class="sectionIntro">In this section of this  section we describe the general architecture of the LiveGraph system and  provide an overview of the modules you will be in touch with when using  LiveGraph in your own software. We include a Java example on how to start using  the LiveGraph API instantly.</p>
			  <div class="versionHint">
			    <strong>This manual refers to LiveGraph version 1.1.X.</strong><br />
				While version 2.0.X is similar in general, there are several key <a href="/changeLog.html">improvements</a>.<br />
				We are working on the manual for version 2.0.X and will make it available as soon as possible. Meanwhile, you can explore the<a href="/ref/javaDoc.html"> source annotated JavaDoc reference</a> (also work in progress).
			  </div> <!-- div class="versionHint" -->
			  <p><a name="ToC"></a>On this page:</p>
			  <ul>
			    <li><a href="#architecture">Overview over the LiveGraph system architecture</a></li>
		        <li><a href="#WriterAPI">Overview over the Data Writer API</a></li>
		        <li><a href="#example">Example for using the Writer API in your own application</a></li>
		        <li><a href="#startingLiveGraph">How to seamlessly integrate the LiveGraph plotter application in your own software    </a></li>
		      </ul>
			  <a name="architecture"></a><h2>LiveGraph architecture</h2>
			  <p>The LiveGraph system consists  of two active parts and a communication channel between the two modules.</p>
			  <p>The most visible part is the  <strong>LiveGraph plotter application</strong>. This is a Java application with a rich GUI. It  is capable of plotting graphs based on data contained in a data stream in  real-time. The distinctive features of the plotter that separate it from other  plotting software are described in the <a href="../whyLiveGraph.html">motivation section</a>. The <a href="../userManual.html">user manual</a>  provides online help for using the plotter.</p>
			  <p>At this point it is important  to note that the LiveGraph plotter is a stand-alone Java application (requires  Java 6 or   later; some features run with Java 5).
			    <!--
			    <span title="Ad. Help us paying for hosting this site! :)" class="inline-ad">If you live in the UK and need to install Java, it should not be any hassle with a decent
			    <a href="http://www.o2.co.uk/" target="_blank">broadband</a>
			    line and a few spare minutes to make sure everything is running smoothly before you proceed.</span>
				-->
			  </p>
			  <div class="rightFigure">
			      <a href="../img/Live-Graph_API-Architecture.gif" title="LiveGraph architecture (click to enlarge)" target="_blank">
				      <img src="../img/Live-Graph_API-Architecture_Thumb.gif" alt="LiveGraph architecture (click to enlarge)" width="425" height="200" />				  </a>
				  <br />
				  <strong>Fig. 1: LiveGraph architecture</strong>
				  <br />Click image to enlarge.			  </div> <!-- div class="rightFigure" -->
			  <p>A second crucial part of  LiveGraph is the <strong>data writer API</strong>. This Java package provides tools for writing  data to a stream that can be read by the plotter. The interface provided by the  data writer API is easy and straight forward. It handles all low level  operations transparently and does not require the developer to worry about any  of the details of the data stream format.</p>
			  <p>As a communication channel  between the writer API and the plotter application LiveGraph uses a <strong>data file</strong>.  The data file is an extended CSV text file. A data writer keeps a file output  stream open and writes new data to the file whenever the application passes a  dataset to it. At the same time the plotter application keeps a file input  stream open on the same file. Every second or so (the interval length is  configurable) the plotter examines the file and checks whether it was modified  since the last check. If the data file was modified, the plotter reads the data  added since the last update and updates the graph on the screen.</p>
			  <p align="right"><a href="#ToC">ToC</a></p>
			  <a name="WriterAPI"></a><h2>Data Writer API</h2>
			  <p>If you are not using Java you  will have to take care of creating the data files yourself. This should be very  straight forward, as the data file format is very simple. Please refer to the<a href="dataFile.html"> data file format definition</a> for details.</p>
			  <p>If you are using Java you can  make use of the LiveGraph data writer API. This simple API handles all data  file matters for your application.</p>
			  <p>The API is distributed in Java  packages <code>org.LiveGraph.dataFile.common</code> and <code>org.LiveGraph.dataFile.write</code>; it also includes the package <code>org.LiveGraph.demoDataSource</code> which contains  examples. The package <code>org.LiveGraph.dataFile.common</code> includes helper classes; the package <code>org.LiveGraph.dataFile.write</code>  includes the main writer API. When you are interested in a detailed description  of the API, please refer to the appropriate <a href="javaDoc.html">Javadoc reference</a> page. At this  stage we want to provide a <strong>kick-start example</strong>.</p>
			  <h3>DataStreamWriterFactory</h3>
			  <p>The first class you need to  know about is <code>org.LiveGraph.dataFile.write.DataStreamWriterFactory</code>. The most interesting methods in this class are the static <code>createDataWriter(…)</code>-methods.  They create  new writer objects for a unique files located in a specified directory. The  file's name is constructed form a specified basis and the current date and time.  This makes creating verbose file names and managing data files very easy.</p>
			  <p>For  instance, the statement</p>
			  <p><tt class="java"><span class="java10">&#xA0; DataStreamWriterFactory.createDataWriter</span><span class="java8">(</span><span class="java5">"C:\\TutorialDir"</span><span class="java10">, </span><br />
			  <span class="java5">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; "TutorialData"</span><span class="java10">, </span><span class="java5">"dat"</span><span class="java8">)</span><span class="java10">;</span></tt></p>
			  <p>creates a writer which writes to the file <code>c:\TutorialDir\TutorialData.07.03.13-19.09.21.dat</code> (assuming it was executed at 19:09:21 on the 13.03.2007).</p>
			  <p>If that file already exists than the names  <code>c:\TutorialDir\TutorialData.07.03.13-19.09.21(1).dat</code>, <code>c:\TutorialDir\TutorialData.07.03.13-19.09.21(2).dat</code>  and so on will be automatically used instead.</p>
			  <p>This mechanism allows you to  do all you data file management in just one line.</p>
			  <h3>DataStreamWriter</h3>
			  <p>The second class you need to  know about is <code>org.LiveGraph.dataFile.write.DataStreamWriter</code>.</p>
			  <p><code>DataStreamWriter</code> objects are actually used for  writing data to files. <code>DataStreamWriter</code> does not extend <code>java.io.Writer</code> because the  structure of the data being written is different and the making use of the  methods published by the standard API class would be counter-intuitive;  however, <code>DataStreamWriter</code> objects should be used in much the same manner as a  normal <code>Writer</code> in an application.<br />
                  <br />
			    The class provides methods for setting up the data file separator, adding  information lines and comments to the data file, defining the number of and the  labels for the data series and, eventually, for writing the data.</p>
			  <p>Before any data is sent to the writer the data series  should be set up with a series of calls to <code>addDataSeries(String)</code>. Once a dataset is  written to the stream, no more data series may be added.</p>
			  <p>A dataset is written by a series of calls to one of  the <code>setDataValue(...)</code> methods. Calls to those methods do not cause any data  to be written. Instead, the values are associated with the appropriate data  series and cached. In order to actually write the data to the underlying stream  the method <code>writeDataSet()</code> must be invoked. It flushes  the cache to the data stream and prepares for the processing of the next  dataset.</p>
			  <p>In order to allow for concise  code when using this class in applications, no methods of <code>DataStreamWriter</code> throw any I/O  exceptions. If an <code>IOException</code> is thrown by the underlying  stream, it is immediately caught by the writer itself. In order to allow the  application to nevertheless access and control the error handling, the methods <code>hadIOException()</code>, <code>getIOException()</code> and <code>resetIOException()</code> are provided.</p>
			  <p align="right"><a href="#ToC">ToC</a></p>
			  <a name="example"></a><h2>Example for using the LiveGraph Writer API </h2>
			  <p>Here is a short example for using the writer API. This example is also included  in most distributions in class  <code>org.LiveGraph.demoDataSource.LiveGraphDemo</code>.</p>
			  <p>In this example a data file is created in the current  working directory. Four data series are added to the data file. Then, the file  is filled with data in bursts of 1 to 10 datasets at a time. Between the bursts  the execution is paused for 0 to 1000 milliseconds. This way a data generating  simulation is emulated. The program stops after 100000 datasets have been  written.</p>
			  <p>Below is the source code of the example (note  the <a href="../licence.html">applicable licence</a>). You can also <a href="../download.html">download the complete example source code</a>  or browse its <a href="javaDoc.html">Javadoc reference</a>. </p>
			  <div style="margin: 0; padding: 10px 4px 10px 4px; border: 1px solid #000077;"> <!-- begin source code example -->
					 <tt class="java"><span class="java4">package </span><span class="java10">org.LiveGraph.demoDataSource;<br />
					  <br />
						</span><span class="java4">import </span><span class="java10">org.LiveGraph.dataFile.write.DataStreamWriter;<br />
						</span><span class="java4">import </span><span class="java10">org.LiveGraph.dataFile.write.DataStreamWriterFactory;<br />
						<br />
						<br />
						</span><span class="java14">/**<br />
						</span><span class="java8">&#xA0;</span><span class="java14">* This class is used for generating a demo data file for demonstration and<br />
						</span><span class="java8">&#xA0;</span><span class="java14">* testing purposes.<br />
						</span><span class="java8">&#xA0;</span><span class="java14">* It creates a data file and fills it with data. This happens in bursts<br />
						</span><span class="java8">&#xA0;</span><span class="java14">* of 1 </span><span class="java14"> to 10 </span><span class="java14"> datasets at a time.<br />
					</span><span class="java8">&#xA0;</span><span class="java14">* Between the bursts the execution is paused for 0 </span><span class="java14">to 10 </span><span class="java14"> milliseconds.<br />
					</span></tt><tt class="java"><span class="java8">&#xA0;</span><span class="java14">* This way a data generating simulation is emulated.<br />
					</span></tt><tt class="java"><span class="java8">&#xA0;</span><span class="java14">*</span><span class="java14"> The program stops after </span><span class="java14">100000   </span><span class="java14"> datasets have been written.<br />
		</span><span class="java8">&#xA0;</span><span class="java14"></span><span class="java14">*&#xA0;<br />
		  </span><span class="java8">&#xA0;</span><span class="java14"></span><span class="java14">* </span><span class="java12">&lt;p&gt;</span><span class="java12">&lt;strong&gt;</span><span class="java14">LiveGraph</span><span class="java12">&lt;/strong&gt; </span><span class="java14">(http://www.live-graph.org</span><span class="java14">).</span><span class="java12">&lt;/p&gt;<br />
				</span><span class="java8">&#xA0;</span><span class="java14"></span><span class="java14">* </span><span class="java12">&lt;p&gt;</span><span class="java14">Copyright (c) 2007 by G. Paperin.</span><span class="java12">&lt;/p&gt;<br />
				</span><span class="java8">&#xA0;</span><span class="java14"></span><span class="java14">* </span><span class="java12">&lt;p&gt;</span><span class="java14">File: LiveGraphDemo.java</span><span class="java12">&lt;/p&gt; <br />
				</span><span class="java8">&#xA0;</span><span class="java14"></span><span class="java14">* </span><span class="java12">&lt;p&gt;&lt;u&gt;</span><span class="java14">Licence</span><span class="java12">&lt;/u&gt;</span><span class="java14">: See http://www.live-graph.org/licence.html.</span><span class="java12">&lt;/p&gt;<br />
				</span><span class="java8">&#xA0;</span><span class="java14"></span><span class="java14">* <br />
				</span><span class="java8">&#xA0;</span><span class="java14"></span><span class="java14">* </span><span class="java11">@author </span><span class="java14"><a href="http://www.paperin.org" target="_blank">Greg Paperin</a></span><span class="java14"><br />
				</span><span class="java8">&#xA0;</span><span class="java14"></span><span class="java14">* </span><span class="java11">@version </span><span class="java14">1.0.1</span><span class="java14"><br />
				</span><span class="java8">&#xA0;</span><span class="java14"></span><span class="java14">*/<br />
				</span><span class="java4">public class </span><span class="java10">LiveGraphDemo </span><span class="java8">{<br />
				<br />
				</span><span class="java4">public static final </span><span class="java10">String DEMO_DIR = System.getProperty</span><span class="java8">(</span><span class="java5">&#34;user.dir&#34;</span><span class="java8">)</span><span class="java10">;<br />
				<br />
				</span><span class="java4">public static final </span><span class="java9">int </span><span class="java10">MIN_SLEEP = </span><span class="java7">0</span><span class="java10">;<br />
				</span><span class="java4">public static final </span><span class="java9">int </span><span class="java10">MAX_SLEEP = </span><span class="java7">1000</span><span class="java10">;<br />
				</span><span class="java4">public static final </span><span class="java9">int </span><span class="java10">MIN_BURST = </span><span class="java7">1</span><span class="java10">;<br />
				</span><span class="java4">public static final </span><span class="java9">int </span><span class="java10">MAX_BURST = </span><span class="java7">10</span><span class="java10">;<br />
				</span><span class="java4">public static final </span><span class="java9">int </span><span class="java10">MAX_DATASETS = </span><span class="java7">100000</span><span class="java10">;<br />
				<br />
				</span><span class="java4">public </span><span class="java9">void </span><span class="java10">exec</span><span class="java8">() {<br />
				&#xA0; <br />
				&#xA0; </span><span class="java3">// Print a welcome message:<br />
				&#xA0; </span><span class="java10">System.out.println</span><span class="java8">(</span><span class="java5">&#34;Welcome to the LiveLog demo.&#34;</span><span class="java8">)</span><span class="java10">;<br />
				&#xA0; <br />
				&#xA0; </span><span class="java3">// Setup a data writer object:<br />
				&#xA0; </span><span class="java10">DataStreamWriter out = DataStreamWriterFactory.createDataWriter</span><span class="java8">(</span><span class="java10">DEMO_DIR,<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java5">&#34;LiveGraphDemo&#34;</span><span class="java8">)</span><span class="java10">;<br />
			&#xA0; <br />
			&#xA0; </span><span class="java3">// Set a values separator:<br />
			  &#xA0; </span><span class="java10">out.setSeparator</span><span class="java8">(</span><span class="java5">&#34;;&#34;</span><span class="java8">)</span><span class="java10">;<br />
				&#xA0; <br />
				&#xA0; </span><span class="java3">// Add a file description line:<br />
				&#xA0; </span><span class="java10">out.writeFileInfo</span><span class="java8">(</span><span class="java5">&#34;LiveGraph demo file.&#34;</span><span class="java8">)</span><span class="java10">;<br />
				&#xA0; <br />
				&#xA0; </span><span class="java3">// Set-up the data series:<br />
				&#xA0; </span><span class="java10">out.addDataSeries</span><span class="java8">(</span><span class="java5">&#34;Time&#34;</span><span class="java8">)</span><span class="java10">;<br />
		&#xA0; out.addDataSeries</span><span class="java8">(</span><span class="java5">&#34;Dataset number&#34;</span><span class="java8">)</span><span class="java10">;<br />
		&#xA0; out.addDataSeries</span><span class="java8">(</span><span class="java5">&#34;Burst number&#34;</span><span class="java8">)</span><span class="java10">;<br />
		&#xA0; out.addDataSeries</span><span class="java8">(</span><span class="java5">&#34;Random value&#34;</span><span class="java8">)</span><span class="java10">;<br />
			&#xA0; <br />
			&#xA0; </span><span class="java3">// Loop until enough datasets a written:<br />
			  &#xA0; </span><span class="java9">int </span><span class="java10">datasetNumber = </span><span class="java7">0</span><span class="java10">;<br />
				&#xA0; </span><span class="java9">int </span><span class="java10">burstNumber = </span><span class="java7">0</span><span class="java10">;<br />
				&#xA0; </span><span class="java9">long </span><span class="java10">startMillis = System.currentTimeMillis</span><span class="java8">()</span><span class="java10">;<br />
				&#xA0; </span><span class="java4">while </span><span class="java8">(</span><span class="java10">MAX_DATASETS &gt; datasetNumber</span><span class="java8">) {<br />
				&#xA0; <br />
		&#xA0;&#xA0;&#xA0; </span><span class="java3">// Status message:<br />
		&#xA0;&#xA0;&#xA0; </span><span class="java10">System.out.println</span><span class="java8">(</span><span class="java5">&#34;Datasets written so far: &#34; </span><span class="java10">+ datasetNumber + </span><span class="java5">&#34;. &#34;<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">+ </span><span class="java5">&#34;Now writing burst &#34; </span><span class="java10">+ burstNumber + </span><span class="java5">&#34;...&#34;</span><span class="java8">)</span><span class="java10">;<br />
		&#xA0;&#xA0;&#xA0; <br />
		&#xA0;&#xA0;&#xA0; </span><span class="java3">// Write a few datasets to the file:<br />
		&#xA0;&#xA0;&#xA0; </span><span class="java9">int </span><span class="java10">burstSize = </span><span class="java8">(</span><span class="java9">int</span><span class="java8">) (</span><span class="java10">MIN_BURST + </span><span class="java8">(</span><span class="java10">Math.random</span><span class="java8">()<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">* </span><span class="java8">(</span><span class="java9">double</span><span class="java8">) (</span><span class="java10">MAX_BURST - MIN_BURST</span><span class="java8">)))</span><span class="java10">;<br />
		&#xA0;&#xA0;&#xA0; </span><span class="java4">for </span><span class="java8">(</span><span class="java9">int </span><span class="java10">b = </span><span class="java7">0</span><span class="java10">; b &lt; burstSize &amp;&amp; MAX_DATASETS &gt; datasetNumber; b++</span><span class="java8">) {<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java3">// Set-up the data values:<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">out.setDataValue</span><span class="java8">(</span><span class="java10">System.currentTimeMillis</span><span class="java8">() </span><span class="java10">- startMillis</span><span class="java8">)</span><span class="java10">;<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; out.setDataValue</span><span class="java8">(</span><span class="java10">datasetNumber</span><span class="java8">)</span><span class="java10">;<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; out.setDataValue</span><span class="java8">(</span><span class="java10">burstNumber</span><span class="java8">)</span><span class="java10">;<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; out.setDataValue</span><span class="java8">(</span><span class="java10">Math.random</span><span class="java8">())</span><span class="java10">;<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java3">// Write dataset to disk:<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">out.writeDataSet</span><span class="java8">()</span><span class="java10">;<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java3">// Check for IOErrors:&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java4">if </span><span class="java8">(</span><span class="java10">out.hadIOException</span><span class="java8">()) {<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">out.getIOException</span><span class="java8">()</span><span class="java10">.printStackTrace</span><span class="java8">()</span><span class="java10">;<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; out.resetIOException</span><span class="java8">()</span><span class="java10">;<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">datasetNumber++;<br />
		&#xA0;&#xA0;&#xA0; </span><span class="java8">}<br />
		&#xA0;&#xA0;&#xA0; </span><span class="java10">burstNumber++;<br />
		&#xA0;&#xA0;&#xA0; <br />
		&#xA0;&#xA0;&#xA0; <br />
		&#xA0;&#xA0;&#xA0; </span><span class="java3">// Pause:<br />
		&#xA0;&#xA0;&#xA0; </span><span class="java10">Thread.yield</span><span class="java8">()</span><span class="java10">;<br />
		&#xA0;&#xA0;&#xA0; </span><span class="java9">long </span><span class="java10">sleep = </span><span class="java8">(</span><span class="java9">long</span><span class="java8">) (</span><span class="java10">MIN_SLEEP + </span><span class="java8">(</span><span class="java10">Math.random</span><span class="java8">()<br />
		&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; </span><span class="java10">* </span><span class="java8">(</span><span class="java9">double</span><span class="java8">) (</span><span class="java10">MAX_SLEEP - MIN_SLEEP</span><span class="java8">)))</span><span class="java10">;<br />
		&#xA0;&#xA0;&#xA0; </span><span class="java4">try </span><span class="java8">{ </span><span class="java10">Thread.sleep</span><span class="java8">(</span><span class="java10">sleep</span><span class="java8">)</span><span class="java10">; </span><span class="java8">} </span><span class="java4">catch </span><span class="java8">(</span><span class="java10">InterruptedException e</span><span class="java8">) {}<br />
		&#xA0;&#xA0;&#xA0; </span><span class="java10">Thread.yield</span><span class="java8">()</span><span class="java10">;<br />
			&#xA0; </span><span class="java8">}&#xA0;&#xA0;&#xA0; <br />
			  &#xA0; <br />
			  &#xA0; </span><span class="java3">// Finish:<br />
				&#xA0; </span><span class="java10">out.close</span><span class="java8">()</span><span class="java10">;<br />
		&#xA0; System.out.println</span><span class="java8">(</span><span class="java5">&#34;Demo finished. Cheers.&#34;</span><span class="java8">)</span><span class="java10">;<br />
			</span><span class="java8">}<br />
			  <br />
			  </span><span class="java4">public static </span><span class="java9">void </span><span class="java10">main</span><span class="java8">(</span><span class="java10">String</span><span class="java8">[] </span><span class="java10">unusedArgs</span><span class="java8">) {<br />
		&#xA0; (</span><span class="java4">new</span> <span class="java10">LiveGraphDemo</span><span class="java8">())</span><span class="java10">.exec</span><span class="java8">()</span><span class="java10">;&#xA0; <br />
			</span><span class="java8">}<br />
			  <br />
			  } </span><span class="java3">// public class LiveGraphDemo</span></tt>
			  <p align="center"><strong>Fig. 2: Example for using LiveGraph Writer API.</strong></p>
			  <p style="font-size: 7px; text-align: right;">Many thanks to the <a href="http://www.java2html.de" target="_blank">Java2Html-tool</a> for the layout.</p>
		    </div> <!-- end source code example -->
			<p align="right"><a href="#ToC">ToC</a></p>
			<a name="startingLiveGraph"></a><h2>Starting the LiveGraph plotter automatically from within your application</h2>
			<p>Now that you know how to  create a data stream which can be use by the LiveGraph plotter to visualise  your data you need to integrate the plotter into your software.</p>
			<p>This is very easy to do &#8212;  regardless which programming language you are using. However, since the plotter  is a Java application, you will need to have Java 6 or later (Java 5 for a  limited feature set) running on the computer which executes your own  application.</p>
			<p><strong>You can integrate LiveGraph  seamlessly into your software in such a way that the user gets the impression that the  plotter is a part of your own system.</strong> This requires only two simple steps:</p>
			<ol>
			  <li>You set-up the settings suitable for your needs that  will be used by the plotter when it opens, and you store these settings in files.</li>
		      <li>You start LiveGraph as a separate OS process on your  machine and use command line parameters to configure the plotter to use your  previously set-up settings when it starts up.</li>
			</ol>
			<p>The two steps are  described in more detail below:</p>
			<h3>Setting up your  plotter configuration</h3>
			<p>Normally, when  LiveGraph plotter starts up it remembers the settings which applied when it was  closed the last time. If it is the first time the plotter is used on a particular  machine, a set of default settings applies. However, it is easy to create your  own settings for LiveGraph. This way you can achieve that plotter begins visualising  your data stream immediately after it starts up - without the user having to  first open your data stream manually. You can pre-configure all application  settings to match the specifics of your data.</p>
			<p>LiveGraph settings  are saved in 3 files:</p>
			<ul>
			  <li>Data file settings are saved in a file with the  extension <code>.lgdfs</code>.</li>
			  <li>Graph settings are saved in a file with the extension  <code>.lggs</code>.</li>
			  <li>Data series settings are saves in a file with the  extension <code>.lgdss</code>.</li>
		    </ul>
			<p>If you are developing your  software in Java you should use the LiveGraph library for creating the settings  files. Otherwise you can create the files directly. Both methods are described  in the following paragraphs.</p>
			<p>The easiest way for creating  and manipulating LiveGraph settings files is <strong>using the LiveGraph Settings API</strong>.</p>
			<p>The Settings API is contained  in the package <code>org.LiveGraph.settings</code>. In order to  obtain that package you need to <a href="../download.html">download</a> one of the LiveGraph distributions  that include the plotter application.</p>
			<p>You only need to use classes <code>DataFileSettings</code>, <code>GraphSettings</code> and <code>DataSeriesSettings</code> in the package <code>org.LiveGraph.settings</code>. They directly correspond to the three groups of settings described above (note that each settings  group corresponds to a separate window in the GUI).</p>
			<p>Assume that your application will  be logging its data to the file &quot;<code>/yourapplication/data.csv</code>&quot;, and that you would  like to update the graph view every 5 seconds. You can use a series of  statements like the following to create an appropriate settings file:</p>
			<p>
			<tt class="java"><span class="java10">&#xA0; DataFileSettings dfs = <span class="java4">new</span> DataFileSettings</span><span class="java8">()</span><span class="java10">;</span><br />
			 <span class="java10">&#xA0; dfs.setDataFile</span><span class="java8">(</span><span class="java5">&quot;/yourapplication/data.csv&quot;</span><span class="java8">)</span><span class="java10">;</span><br />
		    <span class="java10">&#xA0; dfs.setUpdateFrequency</span><span class="java8">(</span><span class="java7">5000</span><span class="java8">)</span><span class="java10">;</span><br />
		    <span class="java10">&#xA0; dfs.save</span><span class="java8">(</span><span class="java5">&quot;/yourapplication/startup.lgdfs&quot;</span><span class="java8">)</span><span class="java10">;</span></tt></p>
			<p>Note – the last statement  saves your settings to the file <code>/yourapplication/startup.lgdfs</code>.</p>
			<p>You can configure all the  other settings in a similar manner. For further information on each setting  please refer to the <a href="../userManual.html">user manual</a>. For further information on the Settings API  please <a href="../download.html">download</a> or <a href="javaDoc.html">browse</a> the JavaDoc reference.</p>
			<p>An alternative possibility is   <strong>writing the settings files directly</strong>. You should use this method if you are  using a different programming language than Java.</p>
			<p>Settings files are simple XML  files. They are in clear text and all identifiers are self explanatory. The reader should be saved from the boring task of reading a definition for the settings file format.  Instead we ask to perform the following actions:</p>
			<ol>
			  <li>Run LiveGraph.</li>
		      <li>Quit LiveGraph  by closing the main window.</li>
			  <li>Examine the contents of the directory from where  you run LiveGraph.</li>
	        </ol>
			<p>There you will find three files: <code>session.lgdfs</code>, <code>session.lggd</code>  and <code>session.lgdss</code>. These are the 3 settings files.</p>
			<p>Open those with your  favourite text editor and you will immediately agree that reading a detailed  description of these files here would be a waste of your time. For a  information about the meaning of each settings key refer to the section about the  corresponding window in the <a href="../userManual.html">user manual</a>.</p>
			<p>By using the examples in the manner described  above you should be able to easily create valid settings files from your  application regardless of the programming language you are using, provided you  have access to the local hard drive.</p>
			<h3>Starting the LiveGraph plotter  from within your own application</h3>
			<p>When you are running Java you  can start LiveGraph directly – i.e. within the same JVM. The LiveGraph  application is abstracted by the class <code>org.LiveGraph.LiveGraph</code>. You can obtain an  instance of the application through a statement like</p>
			<p><tt class="java"><span class="java10">&#xA0; LiveGraph app = LiveGraph.application</span><span class="java8">()</span><span class="java10">;</span></tt></p>
			<p>Now you can  run the application as follows:</p>
			<p><tt class="java"><span class="java10">&#xA0; app.exec</span><span class="java8">(</span><span class="java4">new</span> <span class="java10">String</span><span class="java8">[</span><span class="java7">0</span><span class="java8">])</span><span class="java10">;</span></tt></p>
			<p>When you want to automatically  load your custom settings (see the previous subsection to learn how to create  appropriate settings files) you need to pass the <code>exec</code>-method the appropriate  command line parameters. For information on command line parameters refer to  the <a href="../userManual.html">user manual</a>. An example could look like this:</p>
			<p><tt class="java"><span class="java10">&#xA0; app.exec</span><span class="java8">(</span><span class="java4">new</span> <span class="java10">String</span><span class="java8">[]</span> <span class="java8">{</span><span class="java5">"-dfs"</span><span class="java10">, </span><span class="java5">"/yourapplication/startup.lgdfs"</span><span class="java8">})</span><span class="java10">;</span></tt></p>
			<p>An alternative method is to  start LiveGraph as a separate process. This is the way to go when you are not  using Java or when you want to run LiveGraph within a separate JVM.</p>
			<p>For this you use the procedure  to create autonomous OS processes appropriate for your programming language and  operating system. In order to load your settings you need use command line  parameters which you pass to the process. For details, refer to the <a href="../userManual.html">user  manual</a>.</p>
			<p align="right"><a href="#ToC">ToC</a></p>
			<h2>Summary</h2>
			<p>You should now be able to  seamlessly integrate LiveGraph in any application. In this section we discussed  the <a href="#architecture">general architecture of the LiveGraph</a> system. We reviewed in detail <a href="#WriterAPI">how to  create data log streams</a> and provided a <a href="#example">Java example</a>. Finally we demonstrated  how the LiveGraph plotter component can be seamlessly <a href="#startingLiveGraph">executed from any  application</a>.</p>			
			<!-- InstanceEndEditable --></div><!-- id="content" -->
			<div id="footer"><!-- InstanceBeginEditable name="DocumentValidationLogo" --><img src="../img/Valid-XHTML-1.0.gif" title="This page is valid XHTML 1.0 Transitional" alt="This page is valid XHTML 1.0 Transitional" width="88" height="31" border="0" /> <!-- InstanceEndEditable --><a href="http://sourceforge.net/projects/live-graph/" title="LiveGraph is a member of SourceForge.net" target="_blank"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=191061&amp;type=1" title="LiveGraph is a member of SourceForge.net" alt="LiveGraph is a member of SourceForge.net" width="88" height="31" border="0"  /></a>
				<a href="http://sourceforge.net/donate/index.php?group_id=191061" target="_blank" title="Donate to LiveGraph"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Donate to LiveGraph" title="Donate to LiveGraph" /></a> 
				<a href="#" title="Top of the Page">ToP</a>			</div> 
			<!-- id="footer" -->
			<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
			<script type="text/javascript">
			<!--
				_uacct = "UA-1766210-1";
				urchinTracker();
			// -->
			</script>
			<div id="copyright">
				<a href="http://www.paperin.org" target="_blank" rel="copyright" title="Copyright &copy; 2007-2008 Greg Paperin">Copyright &copy; 2007-2008 Greg Paperin</a>
			</div> 
			<!-- id="copyright" -->

		</div> <!-- id="main_page" -->

	</div> <!-- id="centre" -->

</div> <!-- id="real-time-plotter" -->

</body>

<!-- InstanceEnd --></html>